(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9420:function(e,t,s){Promise.resolve().then(s.bind(s,8991))},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},8991:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(5583),a=s(1780),n=s(7437),o=s(2265),i=s(7648),l=s(9376),c=s(9501),u=s(1456),d=s(7367),m=s(5617),f=s(5048),p=s(4362);function h(){let[e,t]=(0,o.useState)(!1),[s,h]=(0,o.useState)(!1),{login:y,isAuthenticated:x,loading:g}=(0,p.a)(),v=(0,l.useRouter)(),{register:w,handleSubmit:b,formState:{errors:j}}=(0,c.cI)();if((0,o.useEffect)(()=>{!g&&x&&v.push("/")},[x,g,v]),g)return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})});if(x)return null;let k=async e=>{h(!0),(await y(e)).success&&v.push("/"),h(!1)};return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,n.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Welcome back"}),(0,n.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to your account to continue"})]})}),(0,n.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,n.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,n.jsxs)("form",{className:"space-y-6",onSubmit:b(k),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,n.jsxs)("div",{className:"mt-1 relative",children:[(0,n.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,n.jsx)("input",(0,a._)((0,r._)({id:"email",type:"email"},w("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your email"}))]}),j.email&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.email.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,n.jsxs)("div",{className:"mt-1 relative",children:[(0,n.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,n.jsx)("input",(0,a._)((0,r._)({id:"password",type:e?"text":"password"},w("password",{required:"Password is required"})),{className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your password"})),(0,n.jsx)("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e?(0,n.jsx)(m.Z,{className:"w-5 h-5"}):(0,n.jsx)(f.Z,{className:"w-5 h-5"})})]}),j.password&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.password.message})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Signing in...":"Sign in"})})]}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,n.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,n.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,n.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(i.default,{href:"/register",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Create account"})})]})]})})]})}},4362:function(e,t,s){"use strict";s.d(t,{H:function(){return m},a:function(){return f}});var r=s(5583),a=s(1780),n=s(7437),o=s(2265),i=s(3464),l=s(9064);let c=(0,o.createContext)(void 0),u={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0},d=(e,t)=>{switch(t.type){case"AUTH_SUCCESS":return(0,a._)((0,r._)({},e),{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,loading:!1});case"AUTH_FAIL":case"LOGOUT":return(0,a._)((0,r._)({},e),{user:null,token:null,isAuthenticated:!1,loading:!1});case"UPDATE_USER":return(0,a._)((0,r._)({},e),{user:t.payload});case"SET_LOADING":return(0,a._)((0,r._)({},e),{loading:t.payload});default:return e}},m=e=>{let{children:t}=e,[s,a]=(0,o.useReducer)(d,u);(0,o.useEffect)(()=>{s.token?i.Z.defaults.headers.common.Authorization="Bearer ".concat(s.token):delete i.Z.defaults.headers.common.Authorization},[s.token]),(0,o.useEffect)(()=>{(async()=>{if(s.token)try{let e=await i.Z.get("/api/auth/me");a({type:"AUTH_SUCCESS",payload:{user:e.data,token:s.token}})}catch(e){localStorage.removeItem("token"),a({type:"AUTH_FAIL"})}else a({type:"AUTH_FAIL"})})()},[s.token]);let m=async e=>{try{let t=await i.Z.post("/api/auth/register",e);return localStorage.setItem("token",t.data.token),a({type:"AUTH_SUCCESS",payload:t.data}),l.ZP.success("Registration successful!"),{success:!0}}catch(r){var t,s;let e=(null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Registration failed";return l.ZP.error(e),{success:!1,message:e}}},f=async e=>{try{let t=await i.Z.post("/api/auth/login",e);return localStorage.setItem("token",t.data.token),a({type:"AUTH_SUCCESS",payload:t.data}),l.ZP.success("Login successful!"),{success:!0}}catch(r){var t,s;let e=(null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Login failed";return l.ZP.error(e),{success:!1,message:e}}},p=async e=>{try{let t=await i.Z.put("/api/users/profile",e);return a({type:"UPDATE_USER",payload:t.data}),l.ZP.success("Profile updated successfully!"),{success:!0}}catch(r){var t,s;let e=(null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Profile update failed";return l.ZP.error(e),{success:!1,message:e}}},h={user:s.user,token:s.token,isAuthenticated:s.isAuthenticated,loading:s.loading,register:m,login:f,logout:()=>{localStorage.removeItem("token"),a({type:"LOGOUT"}),l.ZP.success("Logged out successfully")},updateProfile:p,updateFavorites:(e,t)=>{var n,o;if(!s.user)return;let i=(0,r._)({},s.user);t?(null===(n=i.favorites)||void 0===n?void 0:n.includes(e))||(i.favorites=[...i.favorites||[],e]):i.favorites=(null===(o=i.favorites)||void 0===o?void 0:o.filter(t=>t!==e))||[],a({type:"UPDATE_USER",payload:i})}};return(0,n.jsx)(c.Provider,{value:h,children:t})},f=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5617:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8301).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},5048:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8301).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7367:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8301).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1456:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(8301).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[589,64,464,501,971,117,744],function(){return e(e.s=9420)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{1091:function(e,t,r){Promise.resolve().then(r.t.bind(r,2972,23)),Promise.resolve().then(r.t.bind(r,4811,23)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,8278)),Promise.resolve().then(r.bind(r,8655))},7371:function(e,t,r){"use strict";var s=r(7437),a=r(2265),i=r(9376),n=r(9150);t.Z=()=>{let[e,t]=(0,a.useState)(""),r=(0,i.useRouter)();return(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&r.push("/designs?search=".concat(encodeURIComponent(e.trim())))},className:"relative w-full",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search embroidery designs...",className:"w-full pl-10 pr-4 py-2 border-2 border-primary-200 rounded-lg focus:ring-2 focus:ring-primary-800 focus:border-primary-800 focus:outline-none transition-all"})]}),(0,s.jsx)("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-primary-900 text-white px-3 py-1 rounded-md hover:bg-primary-800 text-sm transition-colors",children:"Search"})]})}},8278:function(e,t,r){"use strict";var s=r(7437),a=r(2265),i=r(7648),n=r(9376),o=r(4362),l=r(1496),d=r(6124),c=r(4891),u=r(420),m=r(7371);t.default=()=>{let{user:e,isAuthenticated:t,logout:r}=(0,o.a)(),h=(0,n.useRouter)(),[x,f]=(0,a.useState)(!1),[p,y]=(0,a.useState)(!1),v=()=>{r(),y(!1),h.push("/")};return(0,s.jsx)("header",{className:"bg-white shadow-md border-b border-gray-100 sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)(i.default,{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-primary-900 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"S"})}),(0,s.jsx)("span",{className:"text-2xl font-bold text-primary-900 heading-serif",children:"Stitchify"})]}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,s.jsx)(i.default,{href:"/",className:"text-primary-800 hover:text-primary-900 font-medium border-b-2 border-transparent hover:border-primary-900 py-1 transition-all",children:"Home"}),(0,s.jsx)(i.default,{href:"/designs",className:"text-primary-800 hover:text-primary-900 font-medium border-b-2 border-transparent hover:border-primary-900 py-1 transition-all",children:"All Designs"}),t&&(0,s.jsxs)(i.default,{href:"/favorites",className:"text-primary-800 hover:text-primary-900 font-medium border-b-2 border-transparent hover:border-primary-900 py-1 transition-all flex items-center space-x-1",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Favorites"})]}),(0,s.jsx)(i.default,{href:"/contact",className:"text-primary-800 hover:text-primary-900 font-medium border-b-2 border-transparent hover:border-primary-900 py-1 transition-all",children:"Contact"})]}),(0,s.jsx)("div",{className:"hidden md:block flex-1 max-w-md mx-8",children:(0,s.jsx)(m.Z,{})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[t?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>y(!p),className:"flex items-center space-x-2 text-gray-700 hover:text-primary-600 focus:outline-none focus-ring",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"hidden sm:block",children:null==e?void 0:e.username})]}),p&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:[(0,s.jsx)(i.default,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>y(!1),children:"Profile"}),(null==e?void 0:e.role)==="admin"&&(0,s.jsx)(i.default,{href:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>y(!1),children:"Admin Dashboard"}),(0,s.jsx)("button",{onClick:v,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Logout"})]})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(i.default,{href:"/login",className:"text-gray-700 hover:text-primary-600 font-medium",children:"Login"}),(0,s.jsx)(i.default,{href:"/register",className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 font-medium",children:"Sign Up"})]}),(0,s.jsx)("button",{onClick:()=>f(!x),className:"md:hidden p-2 rounded-md text-gray-700 hover:text-primary-600 hover:bg-gray-100",children:x?(0,s.jsx)(c.Z,{className:"w-6 h-6"}):(0,s.jsx)(u.Z,{className:"w-6 h-6"})})]})]}),(0,s.jsx)("div",{className:"md:hidden py-4",children:(0,s.jsx)(m.Z,{})}),x&&(0,s.jsx)("div",{className:"md:hidden py-4 border-t border-gray-200",children:(0,s.jsxs)("nav",{className:"flex flex-col space-y-4",children:[(0,s.jsx)(i.default,{href:"/",className:"text-gray-700 hover:text-primary-600 font-medium",onClick:()=>f(!1),children:"Home"}),(0,s.jsx)(i.default,{href:"/designs",className:"text-gray-700 hover:text-primary-600 font-medium",onClick:()=>f(!1),children:"All Designs"}),t&&(0,s.jsxs)(i.default,{href:"/favorites",className:"text-gray-700 hover:text-primary-600 font-medium flex items-center space-x-2",onClick:()=>f(!1),children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Favorites"})]}),(0,s.jsx)(i.default,{href:"/contact",className:"text-gray-700 hover:text-primary-600 font-medium",onClick:()=>f(!1),children:"Contact"}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.default,{href:"/profile",className:"text-gray-700 hover:text-primary-600 font-medium",onClick:()=>f(!1),children:"Profile"}),(null==e?void 0:e.role)==="admin"&&(0,s.jsx)(i.default,{href:"/admin",className:"text-gray-700 hover:text-primary-600 font-medium",onClick:()=>f(!1),children:"Admin Dashboard"}),(0,s.jsx)("button",{onClick:v,className:"text-left text-gray-700 hover:text-primary-600 font-medium",children:"Logout"})]})]})})]})})}},8655:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var s=r(7437),a=r(2979),i=r(9827),n=r(9064),o=r(4362);let l=new a.S({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function d(e){let{children:t}=e;return(0,s.jsx)(i.aH,{client:l,children:(0,s.jsxs)(o.H,{children:[t,(0,s.jsx)(n.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})}},4362:function(e,t,r){"use strict";r.d(t,{H:function(){return m},a:function(){return h}});var s=r(5583),a=r(1780),i=r(7437),n=r(2265),o=r(3464),l=r(9064);let d=(0,n.createContext)(void 0),c={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0},u=(e,t)=>{switch(t.type){case"AUTH_SUCCESS":return(0,a._)((0,s._)({},e),{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,loading:!1});case"AUTH_FAIL":case"LOGOUT":return(0,a._)((0,s._)({},e),{user:null,token:null,isAuthenticated:!1,loading:!1});case"UPDATE_USER":return(0,a._)((0,s._)({},e),{user:t.payload});case"SET_LOADING":return(0,a._)((0,s._)({},e),{loading:t.payload});default:return e}},m=e=>{let{children:t}=e,[r,a]=(0,n.useReducer)(u,c);(0,n.useEffect)(()=>{r.token?o.Z.defaults.headers.common.Authorization="Bearer ".concat(r.token):delete o.Z.defaults.headers.common.Authorization},[r.token]),(0,n.useEffect)(()=>{(async()=>{if(r.token)try{let e=await o.Z.get("/api/auth/me");a({type:"AUTH_SUCCESS",payload:{user:e.data,token:r.token}})}catch(e){localStorage.removeItem("token"),a({type:"AUTH_FAIL"})}else a({type:"AUTH_FAIL"})})()},[r.token]);let m=async e=>{try{let t=await o.Z.post("/api/auth/register",e);return localStorage.setItem("token",t.data.token),a({type:"AUTH_SUCCESS",payload:t.data}),l.ZP.success("Registration successful!"),{success:!0}}catch(s){var t,r;let e=(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Registration failed";return l.ZP.error(e),{success:!1,message:e}}},h=async e=>{try{let t=await o.Z.post("/api/auth/login",e);return localStorage.setItem("token",t.data.token),a({type:"AUTH_SUCCESS",payload:t.data}),l.ZP.success("Login successful!"),{success:!0}}catch(s){var t,r;let e=(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Login failed";return l.ZP.error(e),{success:!1,message:e}}},x=async e=>{try{let t=await o.Z.put("/api/users/profile",e);return a({type:"UPDATE_USER",payload:t.data}),l.ZP.success("Profile updated successfully!"),{success:!0}}catch(s){var t,r;let e=(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Profile update failed";return l.ZP.error(e),{success:!1,message:e}}},f={user:r.user,token:r.token,isAuthenticated:r.isAuthenticated,loading:r.loading,register:m,login:h,logout:()=>{localStorage.removeItem("token"),a({type:"LOGOUT"}),l.ZP.success("Logged out successfully")},updateProfile:x,updateFavorites:(e,t)=>{var i,n;if(!r.user)return;let o=(0,s._)({},r.user);t?(null===(i=o.favorites)||void 0===i?void 0:i.includes(e))||(o.favorites=[...o.favorites||[],e]):o.favorites=(null===(n=o.favorites)||void 0===n?void 0:n.filter(t=>t!==e))||[],a({type:"UPDATE_USER",payload:o})}};return(0,i.jsx)(d.Provider,{value:f,children:t})},h=()=>{let e=(0,n.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2778:function(){}},function(e){e.O(0,[2,589,64,464,763,731,971,117,744],function(){return e(e.s=1091)}),_N_E=e.O()}]);
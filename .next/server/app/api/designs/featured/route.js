"use strict";(()=>{var e={};e.id=40,e.ids=[40],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6394:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>l,dynamic:()=>d});var i=r(49303),a=r(88716),o=r(60670),s=r(87070),u=r(75748),p=r(61563);let d="force-dynamic";async function l(e){try{await (0,u.u)();let{searchParams:t}=new URL(e.url),r=parseInt(t.get("limit")||"8"),n=await p.Z.find({featured:!0}).populate("categories","name slug").sort({sales:-1,rating:-1}).limit(r).lean();return s.NextResponse.json(n)}catch(e){return console.error("Get featured designs error:",e),s.NextResponse.json({message:"Server error"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/designs/featured/route",pathname:"/api/designs/featured",filename:"route",bundlePath:"app/api/designs/featured/route"},resolvedPagePath:"C:\\stitchify\\src\\app\\api\\designs\\featured\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:g,serverHooks:f}=m,y="/api/designs/featured/route";function v(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}},75748:(e,t,r)=>{r.d(t,{u:()=>s});var n=r(11185),i=r.n(n);if(!process.env.MONGODB_URI)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=process.env.MONGODB_URI,o=global.mongoose;async function s(){if(o.conn)return o.conn;o.promise||(o.promise=i().connect(a,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}o||(o=global.mongoose={conn:null,promise:null})},61563:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(11185),i=r.n(n);let a=new n.Schema({title:{type:String,required:!0,trim:!0},description:{type:String,required:!0},price:{type:Number,required:!0,min:0},images:[{url:{type:String,required:!0},alt:{type:String,required:!0}}],designFiles:{type:Map,of:String},categories:[{type:n.Schema.Types.ObjectId,ref:"Category",required:!0}],difficulty:{type:String,enum:["Beginner","Intermediate","Advanced"],default:"Beginner"},stitchCount:{type:Number,min:0},downloads:{type:Number,default:0},rating:{average:{type:Number,default:0,min:0,max:5},count:{type:Number,default:0}},sales:{type:Number,default:0},featured:{type:Boolean,default:!1},popular:{type:Boolean,default:!1},formats:[{type:String,enum:["SVG","PNG","DST","PES","JEF","EXP","HUS","VP3"]}],tags:[{type:String,trim:!0}]},{timestamps:!0}),o=i().models.Design||i().model("Design",a)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(6394));module.exports=n})();
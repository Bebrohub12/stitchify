"use strict";(()=>{var e={};e.id=450,e.ids=[450],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25912:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var n={};r.r(n),r.d(n,{GET:()=>l,dynamic:()=>p});var i=r(49303),o=r(88716),s=r(60670),a=r(87070),u=r(75748),d=r(61563);let p="force-dynamic";async function l(e,{params:t}){try{await (0,u.u)();let e=await d.Z.findById(t.id).populate("categories","name slug description").lean();if(!e)return a.NextResponse.json({message:"Design not found"},{status:404});return a.NextResponse.json(e)}catch(e){return console.error("Get design error:",e),a.NextResponse.json({message:"Server error"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/designs/[id]/route",pathname:"/api/designs/[id]",filename:"route",bundlePath:"app/api/designs/[id]/route"},resolvedPagePath:"C:\\stitchify\\src\\app\\api\\designs\\[id]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:g,serverHooks:y}=m,f="/api/designs/[id]/route";function v(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},75748:(e,t,r)=>{r.d(t,{u:()=>a});var n=r(11185),i=r.n(n);if(!process.env.MONGODB_URI)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=process.env.MONGODB_URI,s=global.mongoose;async function a(){if(s.conn)return s.conn;s.promise||(s.promise=i().connect(o,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}s||(s=global.mongoose={conn:null,promise:null})},61563:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(11185),i=r.n(n);let o=new n.Schema({title:{type:String,required:!0,trim:!0},description:{type:String,required:!0},price:{type:Number,required:!0,min:0},images:[{url:{type:String,required:!0},alt:{type:String,required:!0}}],designFiles:{type:Map,of:String},categories:[{type:n.Schema.Types.ObjectId,ref:"Category",required:!0}],difficulty:{type:String,enum:["Beginner","Intermediate","Advanced"],default:"Beginner"},stitchCount:{type:Number,min:0},downloads:{type:Number,default:0},rating:{average:{type:Number,default:0,min:0,max:5},count:{type:Number,default:0}},sales:{type:Number,default:0},featured:{type:Boolean,default:!1},popular:{type:Boolean,default:!1},formats:[{type:String,enum:["SVG","PNG","DST","PES","JEF","EXP","HUS","VP3"]}],tags:[{type:String,trim:!0}]},{timestamps:!0}),s=i().models.Design||i().model("Design",o)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(25912));module.exports=n})();
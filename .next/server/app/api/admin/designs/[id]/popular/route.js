"use strict";(()=>{var e={};e.id=173,e.ids=[173],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20895:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>c});var n={};t.r(n),t.d(n,{PATCH:()=>d});var i=t(49303),a=t(88716),o=t(60670),s=t(87070),p=t(75748),u=t(61563);async function d(e,{params:r}){try{await (0,p.u)();let t=r.id,{popular:n}=await e.json(),i=await u.Z.findByIdAndUpdate(t,{popular:n},{new:!0});if(!i)return s.NextResponse.json({message:"Design not found"},{status:404});return s.NextResponse.json({message:`Design ${n?"marked as popular":"removed from popular"}`,design:i})}catch(e){return console.error("Toggle popular error:",e),s.NextResponse.json({message:"Server error"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/designs/[id]/popular/route",pathname:"/api/admin/designs/[id]/popular",filename:"route",bundlePath:"app/api/admin/designs/[id]/popular/route"},resolvedPagePath:"C:\\stitchify\\src\\app\\api\\admin\\designs\\[id]\\popular\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:g}=l,f="/api/admin/designs/[id]/popular/route";function y(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:c})}},75748:(e,r,t)=>{t.d(r,{u:()=>s});var n=t(11185),i=t.n(n);if(!process.env.MONGODB_URI)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=process.env.MONGODB_URI,o=global.mongoose;async function s(){if(o.conn)return o.conn;o.promise||(o.promise=i().connect(a,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}o||(o=global.mongoose={conn:null,promise:null})},61563:(e,r,t)=>{t.d(r,{Z:()=>o});var n=t(11185),i=t.n(n);let a=new n.Schema({title:{type:String,required:!0,trim:!0},description:{type:String,required:!0},price:{type:Number,required:!0,min:0},images:[{url:{type:String,required:!0},alt:{type:String,required:!0}}],designFiles:{type:Map,of:String},categories:[{type:n.Schema.Types.ObjectId,ref:"Category",required:!0}],difficulty:{type:String,enum:["Beginner","Intermediate","Advanced"],default:"Beginner"},stitchCount:{type:Number,min:0},downloads:{type:Number,default:0},rating:{average:{type:Number,default:0,min:0,max:5},count:{type:Number,default:0}},sales:{type:Number,default:0},featured:{type:Boolean,default:!1},popular:{type:Boolean,default:!1},formats:[{type:String,enum:["SVG","PNG","DST","PES","JEF","EXP","HUS","VP3"]}],tags:[{type:String,trim:!0}]},{timestamps:!0}),o=i().models.Design||i().model("Design",a)}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[276,972],()=>t(20895));module.exports=n})();
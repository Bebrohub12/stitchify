(()=>{var e={};e.id=3,e.ids=[3],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},10411:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>h,tree:()=>c}),t(44753),t(1600),t(35866);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),d=t(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,44753)),"C:\\stitchify\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1600)),"C:\\stitchify\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\stitchify\\src\\app\\admin\\page.tsx"],o="/admin/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},41304:(e,s,t)=>{Promise.resolve().then(t.bind(t,24471))},24471:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(10326),r=t(17577),i=t(20108),l=t(87926);let d=(0,l.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var n=t(11480);let c=(0,l.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),x=(0,l.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),o=(0,l.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var m=t(92332),h=t(75901),p=t(58648),g=t(14269),u=t(73183),y=t(44099),j=t(59167),N=t(90434);function v(){let[e,s]=(0,r.useState)("overview"),[t,l]=(0,r.useState)(null),v=async(e,s)=>{l(e);try{await y.Z.patch(`/api/admin/designs/${e}/popular`,{popular:!s}),window.location.reload()}catch(e){console.error("Failed to toggle popular status:",e)}finally{l(null)}},{data:b,isLoading:f}=(0,i.a)({queryKey:["adminDashboard"],queryFn:async()=>(await y.Z.get("/api/admin/dashboard")).data}),{data:w}=(0,i.a)({queryKey:["adminDesigns"],queryFn:async()=>(await y.Z.get("/api/admin/designs")).data}),{data:k}=(0,i.a)({queryKey:["adminCategories"],queryFn:async()=>(await y.Z.get("/api/admin/categories")).data}),Z=[{id:"overview",label:"Overview",icon:d},{id:"designs",label:"Designs",icon:n.Z},{id:"categories",label:"Categories",icon:c},{id:"users",label:"Users",icon:x}],q=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return f?a.jsx(j.Z,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})})}):a.jsx(j.Z,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Manage your embroidery design business"})]}),a.jsx("div",{className:"border-b border-gray-200 mb-8",children:a.jsx("nav",{className:"flex space-x-8",children:Z.map(t=>{let r=t.icon;return(0,a.jsxs)("button",{onClick:()=>s(t.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${e===t.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(r,{className:"w-5 h-5"}),a.jsx("span",{children:t.label})]},t.id)})})}),(0,a.jsxs)("div",{className:"space-y-8",children:["overview"===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(o,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q(b?.totalRevenue||0)})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(n.Z,{className:"w-6 h-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Designs"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b?.totalDesigns||0})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(x,{className:"w-6 h-6 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b?.totalUsers||0})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:a.jsx(c,{className:"w-6 h-6 text-orange-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b?.totalSales||0})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Designs"})}),a.jsx("div",{className:"p-6",children:b?.topDesigns?.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No designs yet"}):a.jsx("div",{className:"space-y-4",children:b?.topDesigns?.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0",children:e.images&&e.images[0]?a.jsx("img",{src:e.images[0].url,alt:e.title,className:"w-16 h-16 object-cover rounded-lg"}):a.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.title}),a.jsxs("p",{className:"text-sm text-gray-500",children:[e.sales," sales • ",q(e.revenue)]})]}),a.jsx(N.default,{href:`/admin/designs/${e._id}`,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"View Details"})]},e._id))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Transactions"})}),a.jsx("div",{className:"p-6",children:b?.recentTransactions?.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No transactions yet"}):a.jsx("div",{className:"space-y-4",children:b?.recentTransactions?.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.design.title}),a.jsxs("p",{className:"text-sm text-gray-500",children:[e.user.username," • ",new Date(e.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-medium text-gray-900",children:q(e.amount)}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})]})]},e._id))})})]})]}),"designs"===e&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Designs"}),(0,a.jsxs)(N.default,{href:"/admin/designs/new",className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Design"})]})]}),a.jsx("div",{className:"p-6",children:w?.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No designs yet"}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Design"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sales"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Popular"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w?.map(e=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.images&&e.images[0]?a.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:e.images[0].url,alt:e.title}):a.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500 text-xs",children:"No Image"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),a.jsx("div",{className:"text-sm text-gray-500",children:e.categories?.map(e=>e.name).join(", ")})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(e.price)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sales||0}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${e.featured?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.featured?"Featured":"Active"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("button",{onClick:()=>v(e._id,e.popular),disabled:t===e._id,className:`flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full transition-colors ${e.popular?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"} ${t===e._id?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx(h.Z,{className:`w-3 h-3 ${e.popular?"fill-current":""}`}),a.jsx("span",{children:e.popular?"Popular":"Make Popular"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(N.default,{href:`/designs/${e._id}`,className:"text-primary-600 hover:text-primary-900",children:a.jsx(p.Z,{className:"w-4 h-4"})}),a.jsx(N.default,{href:`/admin/designs/${e._id}/edit`,className:"text-indigo-600 hover:text-indigo-900",children:a.jsx(g.Z,{className:"w-4 h-4"})}),a.jsx("button",{className:"text-red-600 hover:text-red-900",children:a.jsx(u.Z,{className:"w-4 h-4"})})]})})]},e._id))})]})})})]}),"categories"===e&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Categories"}),(0,a.jsxs)(N.default,{href:"/admin/categories/new",className:"flex items-center space-x-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[a.jsx(m.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Category"})]})]}),a.jsx("div",{className:"p-6",children:k?.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No categories yet"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k?.map(e=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(N.default,{href:`/admin/categories/${e._id}/edit`,className:"text-indigo-600 hover:text-indigo-900",children:a.jsx(g.Z,{className:"w-4 h-4"})}),a.jsx("button",{className:"text-red-600 hover:text-red-900",children:a.jsx(u.Z,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),a.jsxs("div",{className:"text-xs text-gray-400",children:[e.subcategories?.length||0," subcategories"]})]},e._id))})})]}),"users"===e&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management"})}),a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(x,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"User management features coming soon"})]})})]})]})]})})})}},59167:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var a=t(10326),r=t(17577),i=t(35047),l=t(94001);let d=({children:e,redirectTo:s="/login"})=>{let{isAuthenticated:t,user:d}=(0,l.a)(),n=(0,i.useRouter)();return((0,r.useEffect)(()=>{t?d?.role!=="admin"&&n.push("/"):n.push(s)},[t,d,n,s]),t&&d?.role==="admin")?a.jsx(a.Fragment,{children:e}):null}},44753:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\stitchify\src\app\admin\page.tsx#default`)},58648:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(87926).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},11480:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(87926).Z)("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]])},14269:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(87926).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},92332:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(87926).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},75901:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(87926).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},73183:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(87926).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,814,108,662],()=>t(10411));module.exports=a})();
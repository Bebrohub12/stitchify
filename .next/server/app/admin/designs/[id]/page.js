(()=>{var e={};e.id=861,e.ids=[861],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},88671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(97109),s(1600),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["admin",{children:["designs",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,97109)),"C:\\stitchify\\src\\app\\admin\\designs\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1600)),"C:\\stitchify\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\stitchify\\src\\app\\admin\\designs\\[id]\\page.tsx"],u="/admin/designs/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/designs/[id]/page",pathname:"/admin/designs/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6846:(e,t,s)=>{Promise.resolve().then(s.bind(s,29503))},29503:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b,dynamic:()=>f});var r=s(10326),a=s(17577),i=s(35047),n=s(44976),l=s(20108),d=s(10119),c=s(64296),o=s(14269),u=s(73183),x=s(39914),h=s(44921),m=s(75901),p=s(44099),g=s(90434),y=s(40381),j=s(59167);let f="force-dynamic";function b(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),s=(0,n.NL)(),f=e.id,[b,v]=(0,a.useState)(0),{data:N,isLoading:w}=(0,l.a)({queryKey:["adminDesign",f],queryFn:async()=>(await p.Z.get(`/api/admin/designs/${f}`)).data}),Z=(0,d.D)({mutationFn:async()=>(await p.Z.patch(`/api/admin/designs/${f}/featured`,{featured:!N?.featured})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["adminDesign",f]}),y.ZP.success(`Design ${N?.featured?"removed from":"added to"} featured designs`)},onError:()=>{y.ZP.error("Failed to update featured status")}}),k=(0,d.D)({mutationFn:async()=>(await p.Z.patch(`/api/admin/designs/${f}/popular`,{popular:!N?.popular})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["adminDesign",f]}),y.ZP.success(`Design ${N?.popular?"removed from":"added to"} popular designs`)},onError:()=>{y.ZP.error("Failed to update popular status")}}),P=(0,d.D)({mutationFn:async()=>(await p.Z.delete(`/api/admin/designs/${f}`)).data,onSuccess:()=>{y.ZP.success("Design deleted successfully"),t.push("/admin")},onError:()=>{y.ZP.error("Failed to delete design")}});return w?r.jsx(j.Z,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})})}):N?r.jsx(j.Z,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(g.default,{href:"/admin",className:"mr-4 p-2 rounded-full hover:bg-gray-200 transition-colors",children:r.jsx(c.Z,{className:"w-5 h-5 text-gray-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:N.title})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)(g.default,{href:`/admin/designs/${f}/edit`,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[r.jsx(o.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit Design"})]}),(0,r.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this design? This action cannot be undone.")&&P.mutate()},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(u.Z,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative aspect-video bg-gray-100",children:[N.images&&N.images.length>0?r.jsx("img",{src:N.images[b].url,alt:N.images[b].alt||N.title,className:"w-full h-full object-contain"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No image available"}),N.images&&N.images.length>1&&(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center justify-between",children:[r.jsx("button",{onClick:()=>{b>0&&v(b-1)},className:"p-2 rounded-full bg-white/80 text-gray-800 hover:bg-white ml-4",disabled:0===b,children:r.jsx(c.Z,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{N?.images&&b<N.images.length-1&&v(b+1)},className:"p-2 rounded-full bg-white/80 text-gray-800 hover:bg-white mr-4",disabled:b===N.images.length-1,children:r.jsx(c.Z,{className:"w-5 h-5 transform rotate-180"})})]})]}),N.images&&N.images.length>1&&r.jsx("div",{className:"p-4 flex space-x-2 overflow-x-auto",children:N.images.map((e,t)=>r.jsx("button",{onClick:()=>v(t),className:`flex-shrink-0 w-16 h-16 rounded-md overflow-hidden border-2 ${b===t?"border-primary-500":"border-transparent"}`,children:r.jsx("img",{src:e.url,alt:e.alt||`${N.title} - Image ${t+1}`,className:"w-full h-full object-cover"})},t))})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Description"}),r.jsx("div",{className:"prose max-w-none",children:r.jsx("p",{className:"text-gray-700",children:N.description})})]}),N.formats&&N.formats.length>0&&(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Formats"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:N.formats.map((e,t)=>r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:e},t))})]}),N.tags&&N.tags.length>0&&(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:N.tags.map((e,t)=>r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:e},t))})]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Design Details"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Price"}),(0,r.jsxs)("p",{className:"text-lg font-medium text-gray-900",children:["$",N.price.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Difficulty"}),r.jsx("p",{className:"text-gray-900 capitalize",children:N.difficulty})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Stitch Count"}),r.jsx("p",{className:"text-gray-900",children:N.stitchCount.toLocaleString()})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Categories"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:N.categories.map(e=>r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm",children:e.name},e._id))})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Created At"}),r.jsx("p",{className:"text-gray-900",children:new Date(N.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Last Updated"}),r.jsx("p",{className:"text-gray-900",children:new Date(N.updatedAt).toLocaleDateString()})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Performance"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[r.jsx(x.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Downloads"})]}),r.jsx("p",{className:"text-xl font-semibold text-center text-gray-900",children:N.downloads})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[r.jsx(h.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Sales"})]}),r.jsx("p",{className:"text-xl font-semibold text-center text-gray-900",children:N.sales})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[r.jsx(m.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Rating"})]}),(0,r.jsxs)("p",{className:"text-xl font-semibold text-center text-gray-900",children:[N.rating.average.toFixed(1)," (",N.rating.count,")"]})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Revenue"})}),(0,r.jsxs)("p",{className:"text-xl font-semibold text-center text-gray-900",children:["$",(N.price*N.sales).toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Promotion"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Featured Design"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Show on homepage featured section"})]}),r.jsx("button",{onClick:()=>Z.mutate(),className:`px-4 py-2 rounded-lg text-white ${N.featured?"bg-green-600 hover:bg-green-700":"bg-gray-400 hover:bg-gray-500"}`,children:N.featured?"Featured":"Not Featured"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Popular Design"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Show in popular designs section"})]}),r.jsx("button",{onClick:()=>k.mutate(),className:`px-4 py-2 rounded-lg text-white ${N.popular?"bg-green-600 hover:bg-green-700":"bg-gray-400 hover:bg-gray-500"}`,children:N.popular?"Popular":"Not Popular"})]})]})]})]})]})]})})}):r.jsx(j.Z,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Design not found"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"The design you're looking for doesn't exist."}),r.jsx(g.default,{href:"/admin",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Back to Admin Dashboard"})]})})})}},59167:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(10326),a=s(17577),i=s(35047),n=s(94001);let l=({children:e,redirectTo:t="/login"})=>{let{isAuthenticated:s,user:l}=(0,n.a)(),d=(0,i.useRouter)();return((0,a.useEffect)(()=>{s?l?.role!=="admin"&&d.push("/"):d.push(t)},[s,l,d,t]),s&&l?.role==="admin")?r.jsx(r.Fragment,{children:e}):null}},97109:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,dynamic:()=>a});var r=s(68570);let a=(0,r.createProxy)(String.raw`C:\stitchify\src\app\admin\designs\[id]\page.tsx#dynamic`),i=(0,r.createProxy)(String.raw`C:\stitchify\src\app\admin\designs\[id]\page.tsx#default`)},10119:(e,t,s)=>{"use strict";s.d(t,{D:()=>o});var r=s(17577),a=s(71180),i=s(12113),n=s(64351),l=s(3341),d=class extends n.l{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.Ym)(t.mutationKey)!==(0,l.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,a.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.Vr.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},c=s(44976);function o(e,t){let s=(0,c.NL)(t),[a]=r.useState(()=>new d(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let n=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(i.Vr.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=r.useCallback((e,t)=>{a.mutate(e,t).catch(l.ZT)},[a]);if(n.error&&(0,l.L3)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}},64296:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(87926).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},39914:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(87926).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},14269:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(87926).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},44921:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(87926).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},75901:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(87926).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},73183:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(87926).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,814,108,662],()=>s(88671));module.exports=r})();